Rate limiting against DoS attacks

DoS attacks will typically overwhelm your servers with requests, until your server's IO is overloaded, and therefore, shuts itself down. This can be prevented by eliminating the number of requests in a specific amount of time. And this can be prevented from an Express middleware called Express Rate Limit. There is also a module called Rate Limiter, but it has a Redis dependency. So if you're not a fan of adding extra packages when not needed, then use the Express one.

Express Rate Limit module npm install express-rate-limit.

The first thing we need to do is import RateLimit from 'express-rate-limit'. And now, we can use it in our code.

So, let's go ahead and do an example. So, we'll do Rate limit setup. And the way you actually set up the rate limit, you do a variable. So, we'll call this variable limiter, with a new RateLimit, which is a function that takes options here. And then, we'll add the options. So, the first one is windowsMs, and we'll do 15 minutes. So, the way to do 15 minutes, you do 15 times 60 times 1000. So, this is milliseconds times the number of seconds in a minute and times the number of minute. So, this equals two, 15 minutes. Then, what we'll do is the max. So, the number of requests per IP in that time limit. So within that 15 minutes, we can only do 100 requests. So, we'll just type a note here.

So, limit of number of request per IP. And I did do a comma there, so we're good. And then, delayMS, to basically disable delay. So up until we get to those limits, we don't have any delay. Otherwise, we could actually do a delay if we wanted to. So we could do, for example, 1000 milliseconds per request. But we don't wanna do that. So, this disables delays. Perfect! So, this is basically how it works. We just set a rate limit in our application here. So basically, just to summarize what we just did, we actually inserted a rate limit. So, every 15 minutes we can only do 100 requests per IP, which will not shut down the server, unless you have a really, really low-end, hardware server. But in most cases, that's not gonna be an issue. Or you could just change those values to match whatever type of server you have. But with this type of rate limit, you are preventing any DOS attack, or at least, minimizing the impact of a DOS attack if someone is trying to make many IP requests to your server, and therefore, rendering you server useless.